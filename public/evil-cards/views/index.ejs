<link rel="stylesheet" type="text/css" href="/styles/header.css">
<header>
    <div class="menu">
        <a href="/" class="logo"> Медовый Папа<!-- <img src="logo.png" alt="logo"> --> </a>
        <div class="group">
            <ul class="navigation">
                <li><a href="/">Главная</a></li>
                <li><a id="productsLink" href="#">Товары</a></li>
                <li class="login active"><a href="#win1">Войти</a></li>
                <a href="#x" class="overlay" id="win1"></a>
                <div class="popup">
                    <h2>Регистрация</h2>
                    <form method="post" action="/check_login">
                        <label for="username">Имя пользователя:</label>
                        <input type="text" id="username" name="username" required>

                        <label for="password">Пароль:</label>
                        <input type="password" id="password" name="password" required>

                        <button type="submit">Войти</button>
                    </form>
                    <a class="close" title="Закрыть" href="#close"></a>
                </div>
            </ul>
            <div class="navigation1">
                <li><a id="profileLink" href="#"><ion-icon name="person-outline" class="profile"></ion-icon></a></li>
                <li><a href="#"><ion-icon name="git-compare-outline" class="compare"></ion-icon></a></li>
                <li><a href="#"><ion-icon name="heart-outline" class="favorite"></ion-icon></a></li>
                <li><a href="#"><ion-icon name="cart-outline" class="cart"></ion-icon></a></li>
            </div>
            <div class="search">
                <span class="icon">
                    <ion-icon name="search-outline" class="searchBtn"></ion-icon>
                    <ion-icon name="close-circle-outline" class="closeBtn"></ion-icon>
                </span>
            </div>
            <ion-icon name="menu-outline" class="menuToggle"></ion-icon>
            <div class="searchBox">
                <input type="text" placeholder="Ищи тут...">
            </div>
        </div>
    </div>
    <script>
        function extractRoleFromUrl(url) {
            var urlWithoutFragment = url.split('#')[0];
            var urlObject = new URL(urlWithoutFragment);
            var role = urlObject.pathname.split('/')[1];
            return role;
        }
        var currentLink = window.location.href;
        var role = extractRoleFromUrl(currentLink);
        console.log(role)
        var domain = window.location.host;
        var roleLink = "http://" + domain + "/" + role;
        var marketLink = roleLink + "/market";
        var profileLink = roleLink + "/profile";

        var market = document.getElementById("productsLink");
        market.addEventListener("click", function (event) {
            event.preventDefault();
            window.location.href = marketLink;
        });

        var profile = document.getElementById("profileLink");
        profile.addEventListener("click", function (event) {
            event.preventDefault();
            window.location.href = profileLink;
        });
    </script>
    <script>
        var logins = document.querySelectorAll(".login");
        var profiles = document.querySelectorAll(".profile");

        if (role == "a" || role == "u") {
            logins.forEach(login => {
                if (login.classList.contains("active")) {
                    login.classList.remove("active");
                }
            });

            profiles.forEach(profile => {
                if (!profile.classList.contains("active")) {
                    profile.classList.add("active");
                }
            });
        } else {
            logins.forEach(login => {
                if (!login.classList.contains("active")) {
                    login.classList.add("active");
                }
            });

            profiles.forEach(profile => {
                if (profile.classList.contains("active")) {
                    profile.classList.remove("active");
                }
            });
        }
    </script>
</header>